{% block content %}

    {% for question in form.questions.all %}
        <div style="background: -webkit-radial-gradient(center center, circle cover, rgb(246, 248, 255) 68%, rgb(244, 244, 244) 100%); color: rgb(31, 31, 31); border: 0px solid rgb(206, 196, 196); padding: 0px; font-size: 19px; border-radius: 22px; box-shadow: rgb(236, 236, 236) 1px 1px 1px 0px; text-align: center; font-family: Inder, serif;">
            <!-- Muestra la categoría de la pregunta actual -->
            <h2>
                <p style="color:#12176B">{{ question.category }}</p>
            </h2>
        </div>

        <div style="background: -webkit-radial-gradient(center center, circle cover, rgb(246, 248, 255) 68%, rgb(244, 244, 244) 100%); color: rgb(31, 31, 31); border: 0px solid rgb(206, 196, 196); padding: 0px; font-size: 19px; border-radius: 22px; box-shadow: rgb(236, 236, 236) 1px 1px 1px 0px; text-align: center; font-family: Inder, serif;">
            <!-- Muestra el texto de la pregunta -->
            <span>{{ question.text }}</span>
        </div>

        <form method="post">
            {% csrf_token %}
            <div style="margin: 20px; padding: 20px;">
                <!-- Itera sobre las respuestas de la pregunta actual -->
                {% for answer in question.answers.all %}
                    <label style="display: block; margin-bottom: 10px;">
                        <input type="radio" name="question_{{ question.id }}" value="{{ answer.id }}" />
                        {{ answer.text }}
                    </label>
                {% endfor %}
            </div>
            <button type="submit" style="margin: 20px;">Siguiente</button>
        </form>
    {% endfor %}
    
{% endblock %}


{% load cms_tags cms_js_tags i18n menu_tags sekizai_tags static %}

<head>
    <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/modal_survey.css' %}" rel="stylesheet">
    {% render_block "css" %}
</head>

<body>
    {% if completed %}
    <script type="text/javascript">
        window.location.href = "{% url 'form_completed' %}";
    </script>
    {% else %}
    <div class="modal-survey-container modal-survey-embed">
        <div class="section_content section_content-4 survey_element wirk-form">
            <h3><p>{{ current_question.category }}</p></h3>
        </div>
        <div class="survey_table eachdisplay">
            <div class="survey_element survey_question sq4 active_question ms-imgpos wirk-form">
                <span>{{ current_question.text }}</span>
            </div>
        </div>
        <div class="answers-container" style="display: flex; justify-content: space-around; flex-wrap: wrap;">
            {% for answer in answers %}
                <div class="answer" data-value="{{ answer.id }}" style="padding: 10px; margin: 5px; border: 1px solid #ccc; cursor: pointer;">
                    {{ answer.text }}
                </div>
            {% endfor %}
        </div>
        <button id="submit-button" type="button" style="margin: 20px;">Siguiente</button>
    </div>
    {% endif %}
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            var answers = document.querySelectorAll('.answer');
            answers.forEach(function(answer) {
                answer.addEventListener('click', function() {
                    answers.forEach(function(a) { a.classList.remove('selected'); });
                    this.classList.add('selected');
                    document.querySelector('#submit-button').setAttribute('data-selected-answer', this.getAttribute('data-value'));
                });
            });

            document.getElementById('submit-button').addEventListener('click', function() {
                var selectedAnswerId = this.getAttribute('data-selected-answer');
                if (selectedAnswerId) {
                    var form = document.createElement('form');
                    form.method = 'POST';
                    form.action = "{% url 'submit_answer' form_id %}";
                    form.style.display = 'none';

                    var csrfToken = '{% csrf_token %}';
                    form.innerHTML = '<input type="hidden" name="csrfmiddlewaretoken" value="' + csrfToken + '">' +
                                     '<input type="hidden" name="answer" value="' + selectedAnswerId + '">' +
                                     '<input type="hidden" name="question_id" value="{{ current_question.id }}">';
                    
                    document.body.appendChild(form);
                    form.submit();
                }
            });
        });
    </script>
</body>

{% load cms_tags cms_js_tags i18n menu_tags sekizai_tags static %}

<head>
    <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/modal_survey.css' %}" rel="stylesheet">
    {% render_block "css" %}
</head>

<body>
    {% if completed %}
    <script type="text/javascript">
        window.location.href = "{% url 'form_completed' %}";
    </script>
    {% else %}
    <!-- Renderiza tu formulario aquí -->
    <div class="modal-survey-container modal-survey-embed">
        <div class="section_content section_content-4 survey_element wirk-form">
            <!-- Muestra la categoría de la pregunta actual -->
            <h3>
                <p>{{ current_question.category }}</p>
            </h3>
        </div>
        <div class=" survey_table eachdisplay">
            <div class="survey_element survey_question sq4 active_question ms-imgpos wirk-form">
                <!-- Muestra el texto de la pregunta -->
                <span>{{ current_question.text }}</span>
            </div>
        </div>
        <div class="survey_table qt4">
            <form method="post">
                {% csrf_token %}
                <div style="margin: 20px; padding: 20px;">
                    <!-- Itera sobre las respuestas de la pregunta actual -->
                    {% for answer in answers %}
                        <label style="display: block; margin-bottom: 10px;" for="answer{{ answer.id }}">
                            <input type="radio" id="answer{{ answer.id }}" name="answer" value="{{ answer.id }}">
                            {{ answer.text }}
                        </label>
                    {% endfor %}
                </div>
                <button type="submit" style="margin: 20px;">Siguiente</button>
            </form>
        </div>
    </div>
    {% endif %}
</body>